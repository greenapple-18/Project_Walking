<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>게시글 목록 페이지</title>
    <style>
        .active {
            font-weight: bold;
            color: red; /* 활성 페이지 강조를 위한 스타일 */
        }
        .pagination a {
            margin: 0 5px; /* 페이지 링크 간격 */
        }
    </style>
</head>

<body>
<!-- 헤더 영역 -->
<header>
    <div>로고</div>
    <div>메뉴 아이템들</div>
    <div>로그아웃, 마이페이지</div>
</header>

<!-- 사이드바 -->
<div class="sidebar">
    <h3>게시판 목록</h3>
    <ul id="board-list">
        <li th:each="board : ${boardList}">
            <a th:href="@{/board/{boardId}(boardId=${board.boardId})}"
               th:text="${board.name}"></a>
        </li>
    </ul>
</div>

<!-- 메인 콘텐츠 -->
<div class="main-content">
    <!-- 주간 인기글 -->
    <div class="popular-post">
        <h3>주간 인기글</h3>
        <div id="popular-posts">
            <div th:if="${hotPost != null}">
                <h4 th:text="${hotPost.title}">제목</h4>
                <p th:text="${hotPost.content}">내용</p>
                <span>조회수: <span th:text="${hotPost.viewCount}">0</span></span> |
                <span>좋아요: <span th:text="${hotPost.likes}">0</span></span> |
                <span>댓글: <span th:text="${hotPost.commentsCount}">0</span></span>
            </div>
            <div th:if="${hotPost == null}">
                주간 인기글이 없습니다.
            </div>
        </div>

        <div class="recent-post">
            <h3>최근 게시글</h3>

            <!-- 공지사항 목록 -->
            <div class="notice-section">
                <h4>공지사항</h4>
                <ul>
                    <li th:each="notice, iterStat : ${postsList}" th:if="${iterStat.index < 2}">
                        <h4 th:text="${notice.title}"></h4>
                        <p th:text="${notice.content}"></p>
                        <p>작성일: <span th:text="${notice.createdAt}"></span></p>
                    </li>
                </ul>
            </div>

            <!-- 일반 게시글 목록 (공지사항을 제외한 나머지) -->
            <div id="recent-posts">
                <h4>일반 게시글</h4>
                <ul>
                    <li th:each="post, iterStat : ${postsList}" th:if="${iterStat.index >= 2}">
                        <h4 th:text="${post.title}"></h4>
                        <p th:text="${post.content}"></p>
                        <img th:src="${post.postImage}" alt="Post Image"/>
                        <p>작성일: <span th:text="${post.createdAt}"></span></p>
                        <p>조회수: <span th:text="${post.viewCount}"></span></p>
                        <p>좋아요: <span th:text="${post.likes}"></span></p>
                        <p>댓글 수: <span th:text="${post.commentsCount}"></span></p>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- 검색 영역 -->
<div class="search-bar">
    <select name="search-category">
        <option value="title">제목</option>
        <option value="content">내용</option>
        <option value="title-content">제목 + 내용</option>
    </select>
    <input type="text" placeholder="검색어 입력">
    <button class="button">검색</button>
</div>

<!-- 페이지 네비게이션 -->
<div class="pagination">
    <!-- 페이지 번호 표시 -->
    <div>
        <span th:each="pageNum : ${#numbers.sequence(1, pageCount > 10 ? 10 : pageCount)}">
            <a th:href="@{/board/{boardId}(boardId=${boardId}, page=${pageNum})}"
               th:text="${pageNum}"
               th:class="${pageNum == currentPage} ? 'active' : ''"></a>
            <span th:if="${pageNum < (pageCount > 10 ? 10 : pageCount)}"> | </span>
        </span>
    </div>

    <!-- 다음 페이지 링크 -->
    <span th:if="${currentPage < pageCount}">
        <a th:href="@{/board/{boardId}(boardId=${boardId}, page=${currentPage + 1})}">다음</a>
    </span>
</div>
</body>
</html>
