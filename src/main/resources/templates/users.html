<div style="width: 100%;">
  <table class="table table-dark table-striped">
    <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col" class="text-center">이메일</th>
      <th scope="col" class="text-center">이름</th>
      <th scope="col" class="text-center">전화번호</th>
      <th scope="col" class="text-center">닉네임</th>
      <th scope="col" class="text-center">성별</th>
      <th scope="col" class="text-center">생일</th>
      <th scope="col" class="text-center">가입일</th>
      <th scope="col" class="text-center">최근 로그인</th>
      <th scope="col" class="text-center">로그인 횟수</th>
      <th scope="col" class="text-center">계정 활성화 여부</th>
      <th scope="col"></th>
      <th scope="col"></th>
      <th scope="col"></th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="user : ${userList}">
      <td th:text="${user.getUserId()}"></td>
      <td th:text="${user.getEmail()}"></td>
      <td th:text="${user.getName()}"></td>
      <td th:text="${user.getPhone()}"></td>
      <td th:text="${user.getNickname()}"></td>
      <td th:text="${user.getGender()} ? '남' : '여'"></td>
      <td th:text="${user.getBirth()}"></td>
      <td th:text="${user.getJoinDate()}"></td>
      <td th:text="${user.getLastLogin()}"></td>
      <td th:text="${user.getLoginCount()}"></td>
      <td th:text="${user.getIsActive()} ? '활성화' : '비활성화'"></td>
      <td>
        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#userModal"
                th:data-user-id="${user.getUserId()}">자세히</button>
      </td>
      <td><a class="btn btn-success">수정</a></td>
      <td><a class="btn btn-danger">삭제</a></td>
    </tr>
    </tbody>
  </table>
</div>

<div class="modal fade" id="userModal" tabindex="-1" aria-labelledby="userModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div id="modalContent">
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
      </div>
    </div>
  </div>
</div>

<script>
  $('#userModal').on('show.bs.modal', function(event) {
    const button = $(event.relatedTarget);
    const userId = button.data('user-id');

    $.ajax({
      url: '/admin/users/' + userId,
      method: 'GET',
      success: function(data) {
        $('#modalContent').html(data);
      },
      error: function(xhr, status, error) {
        $('#modalContent').html('<p class="text-danger">오류: ' + error + '</p>');
      }
    });
  });
</script>